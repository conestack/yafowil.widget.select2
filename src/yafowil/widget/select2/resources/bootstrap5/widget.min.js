var yafowil_select2=function(t,e){"use strict";class i{static initialize(t){e(".select2",t).each((function(t){let o=e(this);if(void 0!==window.yafowil_array&&window.yafowil_array.inside_template(o))return;let l=o.data();new i(o,l)}))}constructor(t,e){this.elem=t,this.options=this.init_options(e);try{this.elem.select2(this.options)}catch(t){throw`Failed to initialize select2: ${t}`}t.data("yafowil-select2",this),this.elem.val()&&this.elem.trigger("change")}init_options(t){for(let e in t)t[e]=this.extract_value(t[e]);return t.ajaxurl&&(t.ajax={url:t.ajaxurl,dataType:"json",data:function(t){return{q:t.term}},processResults:function(e){return t.tags&&!e.length&&e.push({id:params.term,text:params.term}),{results:e}}},e.fn.select2.amd.require(["select2/data/select"],(function(i){let o=i;o.prototype.current=function(i){console.log("current");let o=this.$element.val();console.log(o);let l=this.$element.data("vocabulary");if(t.multiple){console.log("multi");let t=[];e(this.$element.val().split(",")).each((function(){var e;t.push({id:this,text:(e=this,l&&l[e]?l[e]:e)})})),i(t)}else console.log("single"),i([{id:"foo",text:o}])};let l=o.prototype.select;o.prototype.select=function(t){console.log(t),console.log("ARHGHHGGH"),l.bind(this)(t)},t.dataAdapter=o}))),t.theme="bootstrap-5",t.selectionCssClass="select2--medium",t.dropdownCssClass="select2--medium",t.width="500px",t}extract_value(t){if("string"==typeof t&&!t.indexOf("javascript:")){if(!(t=t.substring(11,t.length).split("."))[0].length)throw"No function defined";let e=window;for(let i of t){if(void 0===e[i])throw`${i} not found`;e=e[i]}t=e}return t}}function o(t,e){i.initialize(e)}function l(){void 0!==window.yafowil_array&&window.yafowil_array.on_array_event("on_add",o)}return e((function(){void 0!==window.ts?ts.ajax.register(i.initialize,!0):void 0!==window.bdajax?bdajax.register(i.initialize,!0):i.initialize(),l()})),t.Select2Widget=i,t.register_array_subscribers=l,Object.defineProperty(t,"__esModule",{value:!0}),window.yafowil=window.yafowil||{},window.yafowil.select2=t,t}({},jQuery);
